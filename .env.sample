# Trading System Configuration
# Copy this file to .env and update with your values

#######################
# API CREDENTIALS
#######################

# Polygon.io API
TRADING_POLYGON_API_KEY=your_polygon_api_key
TRADING_POLYGON_API_BASE_URL=https://api.polygon.io/v2
TRADING_POLYGON_WS_URL=wss://socket.polygon.io/stocks
TRADING_POLYGON_WS_CLUSTERS=5  # Number of WebSocket connections to maintain
TRADING_POLYGON_RATE_LIMIT=5  # Requests per second per endpoint
TRADING_POLYGON_BATCH_SIZE=50  # Maximum items per batch request

# Unusual Whales API
TRADING_UNUSUAL_WHALES_API_KEY=your_unusual_whales_api_key
TRADING_UNUSUAL_WHALES_API_BASE_URL=https://api.unusualwhales.com/v1
TRADING_UNUSUAL_WHALES_RATE_LIMIT=2  # Requests per second
TRADING_UNUSUAL_WHALES_TIMEOUT=30  # Request timeout in seconds

# Alpaca API (for paper trading)
TRADING_APCA_API_KEY_ID=your_alpaca_key_id
TRADING_APCA_API_SECRET_KEY=your_alpaca_secret_key
TRADING_APCA_API_BASE_URL=https://paper-api.alpaca.markets
TRADING_APCA_API_DATA_URL=https://data.alpaca.markets
TRADING_APCA_RETRY_COUNT=3
TRADING_APCA_RETRY_DELAY=1

#######################
# REDIS CONFIGURATION
#######################

# Connection
TRADING_REDIS_HOST=localhost
TRADING_REDIS_PORT=6379
TRADING_REDIS_DB=0
TRADING_REDIS_USERNAME=default
TRADING_REDIS_PASSWORD=your_redis_password
TRADING_REDIS_SSL=false
TRADING_REDIS_TIMEOUT=5
TRADING_REDIS_SOCKET_CONNECT_TIMEOUT=5
TRADING_REDIS_MAX_CONNECTIONS=50

# Caching
TRADING_REDIS_CACHE_TTL=3600  # Default TTL in seconds
TRADING_REDIS_CACHE_PREFIX=trading_system:
TRADING_REDIS_COMPRESSION_ENABLED=true
TRADING_REDIS_COMPRESSION_THRESHOLD=1024  # Bytes
TRADING_REDIS_COMPRESSION_LEVEL=6  # 1-9, higher = better compression but slower
TRADING_REDIS_MAX_MEMORY_POLICY=allkeys-lru

#######################
# GPU CONFIGURATION
#######################

# General
TRADING_USE_GPU=true
TRADING_USE_GH200=true  # Enable GH200-specific optimizations if available
TRADING_PREFERRED_DEVICE_ID=0  # Use -1 for auto-selection

# Memory Management
TRADING_GPU_MEMORY_LIMIT_MB=16000  # MB
TRADING_GPU_MEMORY_FRACTION=0.8  # Fraction of GPU memory to use
TRADING_USE_UNIFIED_MEMORY=true  # For GH200

# Precision and Performance
TRADING_GPU_PRECISION=FP32  # Options: FP32, FP16, INT8
TRADING_TENSORRT_PRECISION=FP16  # Options: FP32, FP16, INT8
TRADING_USE_MIXED_PRECISION=true
TRADING_USE_AMP=true  # Automatic Mixed Precision
TRADING_USE_TF32=true  # TensorFloat-32 for Ampere+ GPUs

# XGBoost GPU Settings
TRADING_XGBOOST_USE_GPU=true
TRADING_XGBOOST_USE_PYTORCH=true
TRADING_XGBOOST_TREE_METHOD=gpu_hist
TRADING_XGBOOST_MAX_BINS=256
TRADING_XGBOOST_GPU_PREDICTOR=true

#######################
# PREDICTOR SETTINGS
#######################

# Minimum lookback period in minutes for fetching historical data for feature calculation
PREDICTOR_LOOKBACK_MINUTES=120
# Additional buffer added to the lookback when fetching data (number of bars)
PREDICTOR_LOOKBACK_BUFFER=50
# Time-to-live (TTL) in seconds for caching calculated features in Redis (0 to disable)
PREDICTOR_CACHE_TTL_SECONDS=60

#######################
# LOGGING CONFIGURATION
#######################

# General
TRADING_LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
TRADING_LOGS_DIR=./logs
TRADING_LOG_FILE_MAX_SIZE=10485760  # 10MB
TRADING_LOG_FILE_BACKUP_COUNT=5
TRADING_LOG_ROTATION_TIME=midnight
TRADING_LOG_UTC=true

# Structured Logging
TRADING_STRUCTURED_LOGGING_ENABLED=true
TRADING_LOG_FORMAT=json  # Options: json, text
TRADING_LOG_INCLUDE_TRACE_ID=true
TRADING_LOG_INCLUDE_TIMESTAMP=true

# Error Tracking with Sentry
TRADING_SENTRY_ENABLED=true
TRADING_SENTRY_DSN=your_sentry_dsn
TRADING_SENTRY_ENVIRONMENT=development  # Options: development, staging, production
TRADING_SENTRY_TRACES_SAMPLE_RATE=0.1
TRADING_SENTRY_PROFILES_SAMPLE_RATE=0.1
TRADING_SENTRY_DEBUG=false
TRADING_SENTRY_RELEASE=1.0.0

#######################
# METRICS CONFIGURATION
#######################


# Metrics Exporter
TRADING_METRICS_EXPORTER_PORT=8000  # Will auto-increment if port is in use
TRADING_METRICS_EXPORTER_HOST=0.0.0.0
TRADING_METRICS_COLLECTION_INTERVAL=5  # seconds

# Ngrok Integration
TRADING_NGROK_ENABLED=true
TRADING_NGROK_AUTH_TOKEN=your_ngrok_auth_token  # Default: 2vB4mEpkOKCPryJJTqcnQZu17mU_2mHUjAc8Gp4egYp8iDVRJ
TRADING_NGROK_API_KEY=your_ngrok_api_key  # Default: 2vB4tKLZnRJTMvPr9lw46ELUTyr_qBaN5g6Eti66dN3m4LTJ

#######################
# PERFORMANCE TUNING
#######################

# Concurrency
TRADING_MAX_CONCURRENT_REQUESTS=10
TRADING_MAX_WORKERS=4
TRADING_THREAD_POOL_SIZE=8
TRADING_ASYNC_POOL_SIZE=20
TRADING_EVENT_LOOP_THREAD_COUNT=4

# Timeouts and Retries
TRADING_DEFAULT_TIMEOUT=30  # seconds
TRADING_DEFAULT_RETRY_COUNT=3
TRADING_DEFAULT_RETRY_DELAY=1  # seconds
TRADING_EXPONENTIAL_BACKOFF=true
TRADING_MAX_RETRY_DELAY=60  # seconds
TRADING_JITTER_FACTOR=0.1

# Rate Limiting
TRADING_API_RATE_LIMIT=5  # requests per second
TRADING_RATE_LIMIT_WINDOW=1  # seconds
TRADING_RATE_LIMIT_STRATEGY=token_bucket
TRADING_BURST_SIZE=10

#######################
# DATA PROCESSING
#######################

# Batch Processing
TRADING_BATCH_SIZE=1000
TRADING_MAX_BATCH_SIZE=10000
TRADING_MIN_BATCH_SIZE=100
TRADING_DYNAMIC_BATCH_SIZING=true

# Caching Strategy
TRADING_CACHE_MARKET_DATA=true
TRADING_CACHE_PROCESSED_DATA=true
TRADING_CACHE_MODEL_RESULTS=true
TRADING_CACHE_EXPIRY_MARKET_DATA=300  # seconds
TRADING_CACHE_EXPIRY_PROCESSED_DATA=1800  # seconds
TRADING_CACHE_EXPIRY_MODEL_RESULTS=3600  # seconds

# Data Validation
TRADING_VALIDATE_INPUT_DATA=true
TRADING_VALIDATE_OUTPUT_DATA=true
TRADING_SCHEMA_VALIDATION_MODE=strict  # Options: strict, lenient

#######################
# FEATURE TOGGLES
#######################

# Core Features
TRADING_ENABLE_REAL_TIME_PROCESSING=true
TRADING_ENABLE_HISTORICAL_PROCESSING=true
TRADING_ENABLE_MODEL_OPTIMIZATION=true
TRADING_ENABLE_ADVANCED_METRICS=true
TRADING_ENABLE_AUTO_SCALING=true
TRADING_ENABLE_CIRCUIT_BREAKER=true

# Trading Features
TRADING_ENABLE_PAPER_TRADING=true
TRADING_ENABLE_LIVE_TRADING=false
TRADING_MAX_POSITIONS=10
TRADING_MAX_POSITION_SIZE=10000
TRADING_RISK_MANAGEMENT_ENABLED=true
TRADING_STOP_LOSS_PERCENTAGE=2.0

#######################
# MLFLOW CONFIGURATION
#######################

# Server Configuration
TRADING_MLFLOW_TRACKING_URI=http://127.0.0.1:5001
TRADING_MLFLOW_ARTIFACT_ROOT=./mlruns
TRADING_MLFLOW_REGISTRY_URI=sqlite:///mlflow.db

# Experiment Settings
TRADING_MLFLOW_EXPERIMENT_NAME=trading_system
TRADING_MLFLOW_RUN_NAME=production_run
TRADING_MLFLOW_TRACKING_USERNAME=mlflow
TRADING_MLFLOW_TRACKING_PASSWORD=your_mlflow_password

# Model Registry
TRADING_MLFLOW_MODEL_REGISTRY_STAGE=Production
TRADING_MLFLOW_REGISTRY_SYNC_INTERVAL=300  # seconds

#######################
# MCP CONFIGURATION
#######################

# General MCP Settings
TRADING_MCP_ENABLED=true
TRADING_MCP_SERVER_CREATION_ENABLED=true
TRADING_MCP_LOG_LEVEL=INFO

# Memory Bank Settings
TRADING_MEMORY_BANK_ENABLED=true
TRADING_MEMORY_BANK_REDIS_PREFIX=memory_bank:
TRADING_MEMORY_BANK_COLLECTION_PREFIX=memory_bank_collection:
TRADING_MEMORY_BANK_INDEX_KEY=memory_bank:index
TRADING_MEMORY_BANK_MAX_RECORDS=10000
TRADING_MEMORY_BANK_IMPORTANCE_THRESHOLD=7
TRADING_MEMORY_BANK_DATA_DIR=./mcp_tools/memory_bank/data

# Memory Bank Security
TRADING_MEMORY_BANK_AUTH_ENABLED=true
TRADING_MEMORY_BANK_ENCRYPTION_ENABLED=true
TRADING_MEMORY_BANK_VALIDATION_ENABLED=true
TRADING_MEMORY_BANK_COMPLIANCE_ENABLED=true
TRADING_MEMORY_BANK_DEFAULT_API_KEY=your_memory_bank_api_key

# Memory Bank API
TRADING_MEMORY_BANK_API_PORT=8081
TRADING_MEMORY_BANK_API_HOST=0.0.0.0
TRADING_MEMORY_BANK_API_ENDPOINT=/api/v1/memory-bank
TRADING_MEMORY_BANK_API_TIMEOUT=30
